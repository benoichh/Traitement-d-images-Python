from PIL.Image import *

    #fonction permettant ded charger une image
    def ChargeImage(link):
    
        img = open(link)
        return img
           
                
    #Pour trouver la taille des rectangles que l'on veut (censure noire)     
    def cc_size(link, start):
    
        img = ChargeImage(link)
      
        X,Y = start
      
        listeAttente = deque()
        listeAttente.append(start)
        tabAttente = [start]
      
        img[X,Y] = 0
      
        while(listeAttente):
          
            Ox,Oy = listeAttente.pop()
      
                for y in range(Oy-1,Oy+1+1):
                    if(0 <= y < im.size[0]):
                        for x in range(Ox-1,Ox+1+1):
                            if(0 <= x < im.size[0]):
                          
                                if(img[x,y] == 0):
                              
                                    listeAttente.append((x,y))
                                    tabAttente.append((x,y))
                                    img[x,y] = 255
                                    
        img.save('grayImg.png')                      
        cmpt = len(tabAttente)         
        return cmpt        
                   
    #Fonction permettant de reconnaître la censure et pour indiquer où est la censure la remplace par du rouge    
    def ReconizeCensure(link):
    
        img = ChargeImage(link)
        
        imgGray = img.convert('LA')
        imgGray.save('grayImg.png')
        
        h = img.size[1]
        w = img.size[0]
        
        for x in range(w):
            for y in range(h):
                start = x,y
                Size = cc_size('grayImg.png', start)
                if(Size >= 75):
                    #faire une actions si la censure dépasse 75 px
          
        img.save('result.png')                    
        pass            


#Question à poser:

#Comment compiler avec une image ?
#Peut on utiliser des API ou doit on tout coder ?
#Comment faire pour entourrer la censure une fois repérer ? 
#Comment différencier une censure blanche d'une grosse partie blanche de l'image de base ?



#liens utiles:

#Pour détecter et censurer automatiquement:

#https://github.com/topics/nudity-detection?l=python
#https://www.programmableweb.com/news/detect-nudity-api-automates-image-censorship/brief/2015/03/31
#https://www.programmableweb.com/api/detect-nudity
#https://blog.algorithmia.com/censor-faces-with-video-processing-algorithms/
#https://blog.algorithmia.com/censoring-faces-automatically/

#Pour reconstituer une image censurée:

#https://www.bogotobogo.com/python/OpenCV_Python/python_opencv3_Image_reconstruction_Inpainting_Interpolation.php
#https://github.com/cwg45/Image-Reconstruction
#https://stats.stackexchange.com/questions/62416/image-reconstruction-using-compressed-sensing
